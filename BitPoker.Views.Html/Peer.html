<!DOCTYPE html>
<html>
<head>
    <title>BitPoker.io Peer</title>
	<meta charset="utf-8" />
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
</head>
<body>
    <h1>BitPoker.io Peer</h1>

	<p>Peers tables</p>
	<table>
	</table>
		
    <script type="text/javascript">
        $(document).ready(function () {

            //var url = window.location.href;
            //var params = url.substring(1).split('?');
            //var keys = params.split('&');

			//Get peer info from local controller + db
            var address = 'msPJhg9GPzMN6twknwmSQvrUKZbZnk51Tv';
            var peerUrl = 'http://localhost:5000/api/peer/' + address;

            $.getJSON(peerUrl)
            .done(function (response) {

				var networkAddress = response.NetworkAddress;

	            $.getJSON(networkAddress + '/api/tables')
    			.done(function (response) {
                    $.each(data, function (key, item) {
                        $('#tables').append('<tr><td>' + item.networkAddress + '</td><td><a href="table.html?address=' + item.id + '">' + item.id + '</a></td><td>' + item.smallBlind + '</td><td>' + item.bigBlind + '</td><td>Join</td></tr>');
                    });
            });
        });
    </script>
</body>
</html>
